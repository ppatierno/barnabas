// Module included in the following assemblies:
//
// assembly-todo.adoc

[id='proc-manual-delete-pod-pvc-zookeeper-{context}']
= Manually deletion of Zookeeper node

This procedure describes how it is possible to delete an existing Zookeeper node by using an {ProductPlatformName} annotation.
The Zookeeper node deletion consists of deleting the `Pod` which is running Zookeeper and the related `PersistentVolumeClaim` if the cluster was deployed with `persistent` storage.
After deletion, the `Pod` (and the related `PersistentVolumeClaim`) will be recreated automatically.

WARNING: this operation should be done only in case of storage issues because `PersistentVolumeClaim` deletion can cause data loss.

.Prerequisites

* A running Zookeeper cluster.
* A running Cluster Operator.

.Procedure

. Find the name of the `Pod` to delete.

Given the name of the cluster as _cluster-name_, all the pods are named as _cluster-name_-zookeeper-_index_ where `index` goes from 0 to the number of replicas.

. Annotate `Pod` resource in {ProductPlatformName}.
+
ifdef::Kubernetes[]
On {KubernetesName} this can be done using `kubectl annotate`:
[source,shell,subs=+quotes]
kubectl annotate pod _cluster-name_-zookeeper-_index_ cluster.operator.strimzi.io/delete-pod-and-pvc=true
endif::Kubernetes[]
+
On {OpenShiftName} this can be done using `oc annotate`:
[source,shell,subs=+quotes]
oc annotate pod _cluster-name_-zookeeper-_index_ cluster.operator.strimzi.io/delete-pod-and-pvc=true
+
. Wait for next reconciliation and the annotated pod with the underlying persistent volume claim will be deleted and then recreated.

.Additional resources

* For more information about deploying the Cluster Operator, see xref:cluster-operator-str[].
* For more information about deploying the Zookeeper cluster, see xref:deploying-zookeeper-cluster-openshift-str[] and xref:deploying-zookeeper-cluster-kubernetes-str[].